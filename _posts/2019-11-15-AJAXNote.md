---
layout: post
title: "AJAX学习笔记"
subtitle: ''
author: "Ivens"
header-mask: 0.1
header-img: "img/in-post/2019-11-15/th.jpg"
tags:
  - 前端学习笔记
---
<br>
- [前言](#%e5%89%8d%e8%a8%80)
  - [同步和异步的区别?](#%e5%90%8c%e6%ad%a5%e5%92%8c%e5%bc%82%e6%ad%a5%e7%9a%84%e5%8c%ba%e5%88%ab)
  - [为什么要使用回调函数?](#%e4%b8%ba%e4%bb%80%e4%b9%88%e8%a6%81%e4%bd%bf%e7%94%a8%e5%9b%9e%e8%b0%83%e5%87%bd%e6%95%b0)

## 前言

**在学习AJAX之前,有几个问题需要先花点时间弄明白**

### 同步和异步的区别?
- `同步方法`调用一旦开始，调用者**必须等到方法调用返回后**，才能继续后续的行为。<br>![](../../../../img/in-post/2019-11-15/a.png)


- `异步方法`调用更像一个消息传递，一旦开始，方法调用就会立即返回，调用者就可以继续后续的操作。**所以先开始执行的代码不一定执行完才会执行下一行代码.**<br>![](../../../../img/in-post/2019-11-15/b.png)

**什么时候需要异步：**

（1）需要等待的时候，等待过程不能卡在这吧

（2）等待过程不像 `alert` 一样阻塞程序运行

（3）等待的情况都要异步

**使用异步的场景：**

（1）定时任务，`setTimeout`，`setInterval`

（2）网络请求： AJAX请求，动态`<img>`加载

（3）事件绑定，点击等交互事件

**JS是异步编程语言，这就是说JS代码的执行顺序并不是从上至下按部就班完成的。**


### 为什么要使用回调函数?

先看下面的这段代码:
```js
function A() {
    B(); 
    console.log('我是主函数');      
}

function B(){
    setTimeout("console.log('我是回调函数')", 3000);//模仿耗时操作  
}

//调用主函数
A();
```

再看一个常见的回调函数:
```js
//定义主函数，回调函数作为参数
function A(callback) {
    callback();  
    console.log('我是主函数');      
}

//定义回调函数
function B(){
    setTimeout("console.log('我是回调函数')", 3000);//模仿耗时操作  
}

//调用主函数，将函数B传进去
A(B);
```

输出结果:
```
我是主函数
我是回调函数
```
执行的顺序是:`先进入A方法 → 执行callback()函数 → 执行log函数 → 结束`

**同样的结果,那我们为什么要使用回调函数?**

因为这样并**不完美**，因为这么做就相当于将B()"焊死"A()里了，如果此处我最终想调用的函数不是B()而是别的其他函数咋整?难不成要写几个不同的A1().A2().A3()?而他们之间的区别仅仅是最后调用的那个函数不同.

所以为了代码的灵活性和复用性，我们决定使用回调函数。

在`大多数编程语言`中，函数的`形参总是由外往内向函数体传递参数`，但在JS里如果形参是关键字"callback"则`完全相反`，它表示函数体在完成某种操作后`由内向外调用某个外部函数`。

**补充:** 如果不想为要调用的函数再单独写个方法,我们可以使用`匿名函数`.那么代码则改成这样:
```js
function A(callback){
    console.log("111");
    callback(123);
}

A(function(value){
    console.log(value);
})
```

结果为:
```
111
123
```

***